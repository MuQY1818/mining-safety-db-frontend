# 聊天历史功能使用说明

## 功能概述

矿区安全AI助手现在支持聊天历史记录功能，每个用户都有独立的聊天空间，可以：
- 创建多个聊天会话
- 查看历史对话记录
- 管理会话（重命名、删除、归档）
- 跨设备同步聊天记录

## 界面介绍

### 1. 聊天界面布局
```
┌─────────────────────────────────────────────────────────────┐
│                    矿区安全AI助手                            │
├─────────────────┬───────────────────────────────────────────┤
│   对话历史      │              聊天区域                     │
│                 │                                           │
│ ○ 瓦斯检测咨询  │  🤖 您好！我是矿区安全AI助手...           │
│ ○ 设备维护问题  │                                           │
│ ○ 安全培训资料  │  👤 煤矿瓦斯检测的标准浓度是多少？        │
│                 │                                           │
│ [+ 新建对话]    │  🤖 根据《煤矿安全规程》规定...           │
│                 │                                           │
│                 │  ┌─────────────────────────────────────┐  │
│                 │  │ 请输入您的问题...                   │  │
│                 │  └─────────────────────────────────────┘  │
└─────────────────┴───────────────────────────────────────────┘
```

### 2. 历史面板功能
- **会话列表**: 显示所有聊天会话，按最后活动时间排序
- **会话标题**: 显示会话名称和最后更新时间
- **新建按钮**: 创建新的聊天会话
- **删除按钮**: 删除不需要的会话
- **隐藏/显示**: 可以隐藏历史面板获得更大聊天空间

## 使用方法

### 1. 开始新对话
1. 点击左侧面板的"新建"按钮
2. 系统自动创建新会话并切换到该会话
3. 开始输入问题进行对话

### 2. 查看历史对话
1. 在左侧历史面板中点击任意会话
2. 系统会加载该会话的完整对话记录
3. 可以继续在该会话中提问

### 3. 管理会话
- **重命名会话**: 点击会话标题进行编辑
- **删除会话**: 点击会话右侧的删除按钮
- **隐藏面板**: 点击右上角"隐藏历史"按钮

### 4. 快速提问
- 左侧面板底部提供常见问题快捷按钮
- 点击即可快速发送预设问题

## 数据存储

### 1. 本地存储
- 会话基本信息缓存在浏览器本地
- 提供离线浏览历史记录的能力
- 自动同步最新数据

### 2. 云端存储
- 所有对话记录安全存储在服务器
- 支持跨设备访问
- 定期备份，数据安全可靠

### 3. 隐私保护
- 每个用户的数据完全隔离
- 采用加密传输和存储
- 支持数据导出和删除

## 技术特性

### 1. 实时同步
- 对话内容实时保存到云端
- 多设备间自动同步
- 网络断开时本地缓存

### 2. 性能优化
- 分页加载历史消息
- 智能缓存策略
- 流式AI响应不影响存储

### 3. 用户体验
- 响应式设计，适配各种屏幕
- 流畅的动画效果
- 直观的操作界面

## 常见问题

### Q: 历史记录会保存多久？
A: 默认保存1年，超过时间的记录会自动归档。重要对话可以手动标记永久保存。

### Q: 可以导出聊天记录吗？
A: 支持导出为JSON、PDF等格式，方便备份和分享。

### Q: 删除的会话可以恢复吗？
A: 删除后30天内可以在回收站中恢复，超过30天将永久删除。

### Q: 聊天记录占用多少存储空间？
A: 每个用户默认有100MB的聊天记录存储空间，可根据需要扩容。

### Q: 如何搜索历史对话？
A: 在历史面板顶部有搜索框，支持按关键词搜索对话内容。

## 快捷键

- `Ctrl + N`: 创建新会话
- `Ctrl + D`: 删除当前会话
- `Ctrl + H`: 显示/隐藏历史面板
- `Ctrl + F`: 搜索历史记录
- `Enter`: 发送消息
- `Shift + Enter`: 换行

## 更新日志

### v1.0.0 (2025-02-06)
- ✅ 基础聊天历史功能
- ✅ 会话管理（创建、删除、重命名）
- ✅ 云端存储和同步
- ✅ 响应式界面设计

### 计划功能
- 🔄 会话搜索和过滤
- 🔄 对话导出功能
- 🔄 会话标签和分类
- 🔄 智能会话摘要
- 🔄 协作分享功能

## 技术支持

如果在使用过程中遇到问题，请：
1. 查看本使用说明
2. 检查网络连接状态
3. 尝试刷新页面
4. 联系技术支持团队

---

*矿区安全AI助手 - 让安全知识触手可及*
